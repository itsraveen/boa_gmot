<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="stylesheet" href="gmot.css"></link>
    <title>GMOT Client UI</title>
    <style>
        .error-message {
            color: red;
            font-size: 12px;
            margin-top: 5px;
        }
    </style>
    <script>
        function handleSubmit(event) {
            event.preventDefault();

            var client = document.getElementById("client").value;
            var commission = document.getElementById("commission").value;
            var grossAmount = document.getElementById("gross_amount").value;

            // Perform client-side validation
            var clientCommission = 0;
            var clientGrossAmount = 0;
            var clientCommissionTolerance = 0;
            var clientGrossAmountTolerance = 0;

            if (Math.abs(clientCommission - parseInt(commission)) > clientCommissionTolerance) {
                window.location.href = "error.html?message=Commission exceeds the client's commission.";
                return;
            }

            if (Math.abs(clientGrossAmount - parseInt(grossAmount)) > clientGrossAmountTolerance) {
                window.location.href = "error.html?message=Gross amount exceeds the client's gross amount.";
                return;
            }

            // If no errors, submit the form
            event.target.submit();
        }
        function confirmSave() {
        document.getElementById("saveButton");
        var choice = confirm("Are the configuration details correct? Do you want to save it?");
        if (choice == true) {
            console.log("config saved.")
        } else {
            console.log("config not saved.")
        }
    }
    </script>
</head>

<body>
    <div class="div1" id="welcomeMsg">
        <h1> Welcome to Your Client Config! </h1>
    </div>

    <div class="div1" id="header1">
        <h1> Input/Update Details </h1>
    </div>
    <form class="div2" action="http://localhost:5501" method="post" align="center" onsubmit="handleSubmit(event)">
        <label for="client">Client:</label>
        <select name="client" id="client">
            <option value="Default">--------- NULL ---------</option>
            <option value="abc">ABCDEFG</option>
            <option value="def">DEF</option>
            <option value="ghi">GHI</option>
          </select> <br><br>
        <!-- <input type="text" name="client" id="client"><br> -->

        <label for="commission">Commission Tolerance:</label>
        <input type="text" name="commission" id="commission"><br><br>

        <label for="gross_amount">Gross Amount Tolerance:</label>
        <input type="text" name="gross_amount" id="gross_amount"><br><br>

        <input type="submit" value="Submit" onclick="confirmSave">
    </form>

    <div class="div1" id="header2">
        <h2> Current Configuration </h2>
    </div>

    <div class="div3">
        <table id="portfolioTable">
            <tr> 
                <th> S.No </th> 
                <th> Coin </th>
                <th> Ticker </th>
                <th> Buy Price </th>
                <th> Buy Quantity </th>
                <th> Current Price </th>
                <th> Profit </th>
                <th> Options </th>
            </tr>
            <tr> 
                <td> - </td>
                <td> - </td>
                <td> - </td>
                <td> - </td>
                <td> - </td>
                <td> - </td>
                <td> - </td>
                <td> - </td>
            </tr>
        </table>
    </div>
</body>
</html>
